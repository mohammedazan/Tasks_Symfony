{
  "version": 3,
  "sources": [
    "node_modules/browser-pack/_prelude.js",
    "components/ComponentRoot.ts",
    "components/stash/stash.js"
  ],
  "names": [],
  "mappings": "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",
  "file": "generated.js",
  "sourceRoot": "",
  "sourcesContent": [
    "(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()",
    "declare var ungit: any;\n\nexport class ComponentRoot {\n  _apiCache: string;\n  defaultDebounceOption = {\n    maxWait: 1500,\n    leading: false,\n    trailing: true\n  }\n\n  constructor() { }\n\n  isSamePayload(value: any) {\n    const jsonString = JSON.stringify(value);\n\n    if (this._apiCache === jsonString) {\n      ungit.logger.debug(`ignoring redraw for same ${this.constructor.name} payload.`);\n      return true;\n    }\n    ungit.logger.debug(`redrawing ${this.constructor.name} payload.  \\n${jsonString}`);\n\n    this._apiCache = jsonString\n    return false;\n  }\n\n  clearApiCache() {\n    this._apiCache = undefined\n  }\n}\n",
    "const ko = require('knockout');\nconst _ = require('lodash');\nconst octicons = require('octicons');\nconst moment = require('moment');\nconst components = require('ungit-components');\nconst storage = require('ungit-storage');\nconst { ComponentRoot } = require('../ComponentRoot');\n\ncomponents.register('stash', (args) => new StashViewModel(args.server, args.repoPath));\n\nclass StashItemViewModel {\n  constructor(stash, data) {\n    this.stash = stash;\n    this.server = stash.server;\n    this.id = data.reflogId;\n    this.sha1 = data.sha1;\n    this.title = `${data.reflogName} ${moment(new Date(data.commitDate)).fromNow()}`;\n    this.message = data.message;\n    this.showCommitDiff = ko.observable(false);\n\n    this.commitDiff = ko.observable(\n      components.create('commitDiff', {\n        fileLineDiffs: data.fileLineDiffs.slice(),\n        sha1: this.sha1,\n        repoPath: stash.repoPath,\n        server: stash.server,\n        showDiffButtons: ko.observable(true),\n      })\n    );\n    this.dropIcon = octicons.x.toSVG({ height: 18 });\n    this.applyIcon = octicons.pencil.toSVG({ height: 20 });\n  }\n\n  apply() {\n    this.server\n      .delPromise(`/stashes/${this.id}`, { path: this.stash.repoPath(), apply: true })\n      .catch((e) => this.server.unhandledRejection(e));\n  }\n\n  drop() {\n    components.showModal('yesnomodal', {\n      title: 'Are you sure you want to drop the stash?',\n      details: 'This operation cannot be undone.',\n      closeFunc: (isYes) => {\n        if (!isYes) return;\n        this.server\n          .delPromise(`/stashes/${this.id}`, { path: this.stash.repoPath() })\n          .catch((e) => this.server.unhandledRejection(e));\n      },\n    });\n  }\n\n  toggleShowCommitDiffs() {\n    this.showCommitDiff(!this.showCommitDiff());\n  }\n}\n\nclass StashViewModel extends ComponentRoot {\n  constructor(server, repoPath) {\n    super();\n    this.server = server;\n    this.repoPath = repoPath;\n    this.refresh = _.debounce(this._refresh, 250, this.defaultDebounceOption);\n    this.stashedChanges = ko.observable([]);\n    this.isShow = ko.observable(storage.getItem('showStash') === 'true');\n    this.visible = ko.computed(() => this.stashedChanges().length > 0 && this.isShow());\n    this.expandIcon = octicons['chevron-right'].toSVG({ height: 18 });\n    this.expandedIcon = octicons['chevron-down'].toSVG({ height: 22 });\n    this.refresh();\n  }\n\n  updateNode(parentElement) {\n    ko.renderTemplate('stash', this, {}, parentElement);\n  }\n\n  onProgramEvent(event) {\n    if (event.event == 'request-app-content-refresh' || event.event == 'git-directory-changed') {\n      this.refresh();\n    }\n  }\n\n  async _refresh() {\n    ungit.logger.debug('stash.refresh() triggered');\n\n    try {\n      const stashes = await this.server.getPromise('/stashes', { path: this.repoPath() });\n      if (this.isSamePayload(stashes)) {\n        return;\n      }\n\n      let changed = this.stashedChanges().length != stashes.length;\n      if (!changed) {\n        changed = !this.stashedChanges().every((item1) =>\n          stashes.some((item2) => item1.sha1 == item2.sha1)\n        );\n      }\n\n      if (changed) {\n        this.stashedChanges(stashes.map((item) => new StashItemViewModel(this, item)));\n      }\n    } catch (err) {\n      if (err.errorCode != 'no-such-path') {\n        this.server.unhandledRejection(err);\n      } else {\n        ungit.logger.warn('refresh failed: ', err);\n      }\n    } finally {\n      ungit.logger.debug('stash.refresh() finished');\n    }\n  }\n\n  toggleShowStash() {\n    this.isShow(!this.isShow());\n    storage.setItem('showStash', this.isShow());\n  }\n}\n"
  ]
}