{
  "version": 3,
  "sources": [
    "node_modules/browser-pack/_prelude.js",
    "components/ComponentRoot.ts",
    "components/branches/branches.js"
  ],
  "names": [],
  "mappings": "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",
  "file": "generated.js",
  "sourceRoot": "",
  "sourcesContent": [
    "(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()",
    "declare var ungit: any;\n\nexport class ComponentRoot {\n  _apiCache: string;\n  defaultDebounceOption = {\n    maxWait: 1500,\n    leading: false,\n    trailing: true\n  }\n\n  constructor() { }\n\n  isSamePayload(value: any) {\n    const jsonString = JSON.stringify(value);\n\n    if (this._apiCache === jsonString) {\n      ungit.logger.debug(`ignoring redraw for same ${this.constructor.name} payload.`);\n      return true;\n    }\n    ungit.logger.debug(`redrawing ${this.constructor.name} payload.  \\n${jsonString}`);\n\n    this._apiCache = jsonString\n    return false;\n  }\n\n  clearApiCache() {\n    this._apiCache = undefined\n  }\n}\n",
    "const ko = require('knockout');\nconst _ = require('lodash');\nconst octicons = require('octicons');\nconst components = require('ungit-components');\nconst storage = require('ungit-storage');\nconst showRemote = 'showRemote';\nconst showBranch = 'showBranch';\nconst showTag = 'showTag';\nconst { ComponentRoot } = require('../ComponentRoot');\n\ncomponents.register('branches', (args) => {\n  return new BranchesViewModel(args.server, args.graph, args.repoPath);\n});\n\nclass BranchesViewModel extends ComponentRoot {\n  constructor(server, graph, repoPath) {\n    super();\n    this.repoPath = repoPath;\n    this.server = server;\n    this.updateRefs = _.debounce(this._updateRefs, 250, this.defaultDebounceOption);\n    this.branchesAndLocalTags = ko.observableArray();\n    this.current = ko.observable();\n    this.isShowRemote = ko.observable(storage.getItem(showRemote) != 'false');\n    this.isShowBranch = ko.observable(storage.getItem(showBranch) != 'false');\n    this.isShowTag = ko.observable(storage.getItem(showTag) != 'false');\n    this.graph = graph;\n    const setLocalStorageAndUpdate = (localStorageKey, value) => {\n      storage.setItem(localStorageKey, value);\n      this.updateRefs();\n      return value;\n    };\n    this.shouldAutoFetch = ungit.config.autoFetch;\n    this.isShowRemote.subscribe(() => {\n      this.clearApiCache();\n      setLocalStorageAndUpdate(showRemote);\n    });\n    this.isShowBranch.subscribe(() => {\n      this.clearApiCache();\n      setLocalStorageAndUpdate(showBranch);\n    });\n    this.isShowTag.subscribe(() => {\n      this.clearApiCache();\n      setLocalStorageAndUpdate(showTag);\n    });\n    this.refsLabel = ko.computed(() => this.current() || 'master (no commits yet)');\n    this.branchIcon = octicons['git-branch'].toSVG({ height: 18 });\n    this.closeIcon = octicons.x.toSVG({ height: 18 });\n  }\n\n  checkoutBranch(branch) {\n    branch.checkout();\n  }\n  updateNode(parentElement) {\n    ko.renderTemplate('branches', this, {}, parentElement);\n  }\n  clickFetch() {\n    this.updateRefs(true);\n  }\n  onProgramEvent(event) {\n    if (\n      event.event === 'request-app-content-refresh' ||\n      event.event === 'branch-updated' ||\n      event.event === 'git-directory-changed' ||\n      event.event === 'current-remote-changed'\n    ) {\n      this.updateRefs();\n    }\n  }\n  async _updateRefs(forceRemoteFetch) {\n    forceRemoteFetch = forceRemoteFetch || this.shouldAutoFetch || '';\n\n    const branchesProm = this.server.getPromise('/branches', { path: this.repoPath() });\n    const refsProm = this.server.getPromise('/refs', {\n      path: this.repoPath(),\n      remoteFetch: forceRemoteFetch,\n    });\n\n    try {\n      // set current branch\n      (await branchesProm).forEach((b) => {\n        if (b.current) {\n          this.current(b.name);\n        }\n      });\n    } catch (e) {\n      this.current('~error');\n      ungit.logger.warn('error while setting current branch', e);\n    }\n\n    try {\n      // update branches and tags references.\n      const refs = await refsProm;\n      if (this.isSamePayload(refs)) {\n        return;\n      }\n\n      const version = Date.now();\n      const sorted = refs\n        .map((r) => {\n          const ref = this.graph.getRef(r.name.replace('refs/tags', 'tag: refs/tags'));\n          ref.node(this.graph.getNode(r.sha1));\n          ref.version = version;\n          return ref;\n        })\n        .sort((a, b) => {\n          if (a.current() || b.current()) {\n            return a.current() ? -1 : 1;\n          } else if (a.isRemoteBranch === b.isRemoteBranch) {\n            if (a.name < b.name) {\n              return -1;\n            }\n            if (a.name > b.name) {\n              return 1;\n            }\n            return 0;\n          } else {\n            return a.isRemoteBranch ? 1 : -1;\n          }\n        })\n        .filter((ref) => {\n          if (ref.localRefName == 'refs/stash') return false;\n          if (ref.localRefName.endsWith('/HEAD')) return false;\n          if (!this.isShowRemote() && ref.isRemote) return false;\n          if (!this.isShowBranch() && ref.isBranch) return false;\n          if (!this.isShowTag() && ref.isTag) return false;\n          return true;\n        });\n      this.branchesAndLocalTags(sorted);\n      this.graph.refs().forEach((ref) => {\n        // ref was removed from another source\n        if (!ref.isRemoteTag && ref.value !== 'HEAD' && (!ref.version || ref.version < version)) {\n          ref.remove(true);\n        }\n      });\n    } catch (e) {\n      ungit.logger.error('error during branch update: ', e);\n    }\n  }\n\n  branchRemove(branch) {\n    let details = `\"${branch.refName}\"`;\n    if (branch.isRemoteBranch) {\n      details = `<code style='font-size: 100%'>REMOTE</code> ${details}`;\n    }\n    components.showModal('yesnomodal', {\n      title: 'Are you sure?',\n      details: 'Deleting ' + details + ' branch cannot be undone with ungit.',\n      closeFunc: (isYes) => {\n        if (!isYes) return;\n        return branch.remove();\n      },\n    });\n  }\n}\n"
  ]
}