(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
var ko = require('knockout');
var octicons = require('octicons');
var components = require('ungit-components');
var encodePath = require('ungit-address-parser').encodePath;
components.register('home', function (args) { return new HomeViewModel(args.app); });
var HomeRepositoryViewModel = /** @class */ (function () {
    function HomeRepositoryViewModel(home, path) {
        this.home = home;
        this.app = home.app;
        this.server = this.app.server;
        this.path = path;
        this.title = path;
        this.link = "".concat(ungit.config.rootPath, "/#/repository?path=").concat(encodePath(path));
        this.pathRemoved = ko.observable(false);
        this.remote = ko.observable('...');
        this.updateState();
        this.removeIcon = octicons.x.toSVG({ height: 18 });
        this.arrowIcon = octicons['arrow-right'].toSVG({ height: 24 });
    }
    HomeRepositoryViewModel.prototype.updateState = function () {
        var _this = this;
        this.server
            .getPromise("/fs/exists?path=".concat(encodePath(this.path)))
            .then(function (exists) {
            _this.pathRemoved(!exists);
        })
            .catch(function (e) { return _this.server.unhandledRejection(e); });
        this.server
            .getPromise("/remotes/origin?path=".concat(encodePath(this.path)))
            .then(function (remote) {
            _this.remote(remote.address.replace(/\/\/.*?@/, '//***@'));
        })
            .catch(function (err) {
            _this.remote('');
        });
    };
    HomeRepositoryViewModel.prototype.remove = function () {
        this.app.repoList.remove(this.path);
        this.home.update();
    };
    return HomeRepositoryViewModel;
}());
var HomeViewModel = /** @class */ (function () {
    function HomeViewModel(app) {
        var _this = this;
        this.app = app;
        this.repos = ko.observableArray();
        this.showNux = ko.computed(function () { return _this.repos().length == 0; });
        this.addIcon = octicons.plus.toSVG({ height: 18 });
    }
    HomeViewModel.prototype.updateNode = function (parentElement) {
        ko.renderTemplate('home', this, {}, parentElement);
    };
    HomeViewModel.prototype.shown = function () {
        this.update();
    };
    HomeViewModel.prototype.update = function () {
        var _this = this;
        var reposByPath = {};
        this.repos().forEach(function (repo) {
            reposByPath[repo.path] = repo;
        });
        this.repos(this.app
            .repoList()
            .sort()
            .map(function (path) {
            if (!reposByPath[path])
                reposByPath[path] = new HomeRepositoryViewModel(_this, path);
            return reposByPath[path];
        }));
    };
    Object.defineProperty(HomeViewModel.prototype, "template", {
        get: function () {
            return 'home';
        },
        enumerable: false,
        configurable: true
    });
    return HomeViewModel;
}());

},{"knockout":undefined,"octicons":undefined,"ungit-address-parser":undefined,"ungit-components":undefined}]},{},[1])
//# sourceMappingURL=home.bundle.js.map
